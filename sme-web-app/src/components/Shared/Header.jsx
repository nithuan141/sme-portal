import React, { useState, useEffect } from 'react'
import { useHistory } from 'react-router-dom/cjs/react-router-dom.min'
import { getLoggedInUser } from "../../services/user.service";

export const Header = () => {
    const [showUserInfo, setShowUserInfo] = useState()
    const [scroll, setScroll] = useState(false);
    const currentUser = getLoggedInUser()
    const history = useHistory()

    useEffect(() => {
        window.addEventListener("scroll", () => {
            setScroll(window.scrollY > 50);
        });
    }, []);


    return <header className={`header header-user${scroll ? ' header--scroll' : ''}`}>
        <nav className="content-wrapper">

            <div className="header__logo">
                <a href="#/course">
                    <LogoSVG />
                </a>
            </div>
            <div className="header__menu" onClick={e => setShowUserInfo(!showUserInfo)}>
                <div className="dropdown">
                    <button className="" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                        <span>{currentUser.name}</span>
                        {/* <img src="images/profile.png" alt="" /> */}
                    </button>
                    <ul className={`dropdown-menu${showUserInfo ? ' show' : ''}`} aria-labelledby="dropdownMenuButton1">
                        {/* <li><a className="dropdown-item" href="#">Change password</a></li> */}
                        <li><a className="dropdown-item" href="#" onClick={e => {
                            e.preventDefault(); localStorage.clear(); history.push('/');
                        }}>Logout</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
}

const LogoSVG = () => {
    return <>
        <svg xmlns="http://www.w3.org/2000/svg" width="110.244" height="69.443" viewBox="0 0 110.244 69.443">
            <g transform="translate(-187.154 -132.111)">
                <g transform="translate(187.154 145.292)">
                    <g transform="translate(0 0)">
                        <path
                            d="M219.187,218.912v.254a3.232,3.232,0,0,1-.025.43,2.553,2.553,0,0,0-.026.38,1.6,1.6,0,0,0-.1.456.223.223,0,0,1-.025.1.224.224,0,0,0-.025.1v.1a.147.147,0,0,1-.051.1.818.818,0,0,1-.1.355v.051a.292.292,0,0,0-.05.2l-.051.05c0,.068-.018.1-.05.1a1.993,1.993,0,0,1-.2.557v.05l-.051.051a.146.146,0,0,0-.051.1.146.146,0,0,1-.05.1l-.151.3-.051.051v.051a.146.146,0,0,0-.051.1c-.068.068-.1.119-.1.152a.378.378,0,0,0-.076.1.41.41,0,0,1-.076.1.781.781,0,0,1-.152.2v.051a5.1,5.1,0,0,1-.455.506v.05a.045.045,0,0,0-.051.051,9.515,9.515,0,0,1-2.859,2.176,9.119,9.119,0,0,1-3.72.962h-23.43v-.253a8.623,8.623,0,0,1,.354-2.075,7.259,7.259,0,0,1,.861-1.872,8.791,8.791,0,0,1,3.315-3.062,9.658,9.658,0,0,1,4.681-1.139H208.1a.7.7,0,0,0,.3-.051h.051a.217.217,0,0,0,.1-.025.223.223,0,0,1,.1-.025.206.206,0,0,1,.152-.051c.033-.033.059-.05.076-.05s.042-.017.076-.051a.289.289,0,0,0,.2-.1l.051-.05a1.091,1.091,0,0,0,.253-.2v-.051q.152-.05.151-.152l.1-.1.1-.2a.148.148,0,0,1,.051-.1.2.2,0,0,1,.025-.126.2.2,0,0,0,.026-.127l.05-.1V213.75a1.763,1.763,0,0,0-.582-1.315,2.005,2.005,0,0,0-1.442-.557H195.909a9.624,9.624,0,0,1-1.746-.253,14.189,14.189,0,0,1-1.645-.506l-.05-.051q-.2-.1-.709-.3a.045.045,0,0,0-.05-.05,3.149,3.149,0,0,1-.355-.2l-.3-.2a.142.142,0,0,1-.1-.05c-.1-.067-.195-.127-.279-.177a1.125,1.125,0,0,1-.227-.177.479.479,0,0,0-.1-.076.379.379,0,0,1-.1-.076,2.048,2.048,0,0,0-.2-.177,1.715,1.715,0,0,1-.2-.177l-.2-.2-.3-.3-.051-.051a3.068,3.068,0,0,0-.354-.4.749.749,0,0,1-.152-.2.437.437,0,0,1-.127-.2.459.459,0,0,0-.126-.2.364.364,0,0,1-.076-.1.432.432,0,0,0-.076-.1,4.623,4.623,0,0,1-.253-.4l-.152-.3a.951.951,0,0,1-.076-.2,1.035,1.035,0,0,0-.076-.2,2.641,2.641,0,0,1-.152-.355,2.57,2.57,0,0,1-.152-.354.448.448,0,0,1-.05-.2.457.457,0,0,0-.051-.2.38.38,0,0,1-.05-.152.41.41,0,0,0-.051-.152,1.486,1.486,0,0,0-.025-.278,1.36,1.36,0,0,1-.026-.279.564.564,0,0,1-.05-.253,4.174,4.174,0,0,1-.05-.759v-7.337a3.071,3.071,0,0,1,.025-.43,3.759,3.759,0,0,1,.076-.379,4.2,4.2,0,0,1,.1-.759.146.146,0,0,0,.05-.1.392.392,0,0,0,.051-.152.392.392,0,0,1,.05-.152v-.1a.3.3,0,0,0,.051-.2h.05v-.05c0-.068.017-.1.051-.1a1.562,1.562,0,0,1,.2-.557v-.05a.045.045,0,0,0,.05-.051.144.144,0,0,0,.051-.1.145.145,0,0,1,.051-.1l.152-.3.05-.051v-.05a.146.146,0,0,0,.051-.1c.067-.067.1-.118.1-.152a.8.8,0,0,0,.152-.2.78.78,0,0,1,.151-.2l.05-.05a3.307,3.307,0,0,1,.405-.506v-.051a.045.045,0,0,0,.05-.051l.355-.354a5.042,5.042,0,0,1,.506-.456l.151-.151a3.077,3.077,0,0,0,.456-.355A9.407,9.407,0,0,1,193,188.651a10.415,10.415,0,0,1,2.758-.557h23.43v.2a7.79,7.79,0,0,1-1.214,3.947,8.8,8.8,0,0,1-3.315,3.061,9.656,9.656,0,0,1-4.681,1.139h-11.74a.717.717,0,0,0-.3.051h-.05a.229.229,0,0,0-.1.025.22.22,0,0,1-.1.026.206.206,0,0,1-.152.051c-.034.034-.06.05-.076.05s-.042.017-.076.051l-.2.1-.051.05a.272.272,0,0,0-.127.1.272.272,0,0,1-.126.1v.051l-.152.151-.1.1a.291.291,0,0,1-.1.2c0,.068-.017.1-.051.1a.2.2,0,0,1-.025.127.2.2,0,0,0-.025.126.146.146,0,0,1-.051.1v3.593a1.761,1.761,0,0,0,.582,1.316,2,2,0,0,0,1.442.557h12.044a8.487,8.487,0,0,1,3.39.809h.051a7.231,7.231,0,0,1,.708.355h.05a3.423,3.423,0,0,1,.354.2l.3.2a.15.15,0,0,1,.1.051c.1.068.194.126.278.177a1.232,1.232,0,0,1,.228.177.365.365,0,0,0,.1.076.441.441,0,0,1,.1.076,1.8,1.8,0,0,0,.2.177,2.116,2.116,0,0,1,.2.177.365.365,0,0,0,.1.076.278.278,0,0,1,.1.126l.3.3.05.051a2.874,2.874,0,0,0,.354.4.456.456,0,0,1,.076.1.379.379,0,0,0,.076.1,2.765,2.765,0,0,1,.253.4,1.234,1.234,0,0,1,.152.253,1.387,1.387,0,0,1,.253.354l.151.3a1.13,1.13,0,0,0,.2.4.419.419,0,0,1,.05.177.4.4,0,0,0,.051.177,2.857,2.857,0,0,1,.151.354.51.51,0,0,1,.051.228.493.493,0,0,0,.051.228.49.49,0,0,1,.051.126.42.42,0,0,0,.05.127,2.751,2.751,0,0,0,.1.607v.2a4.612,4.612,0,0,1,.051.81v7.034Z"
                            transform="translate(-187.154 -188.094)" fill="#387ed1" />
                    </g>
                </g>
                <path
                    d="M339.751,227.966V197.707a8.1,8.1,0,0,1,1.265-4.432,9.3,9.3,0,0,1,3.34-3.158,9.4,9.4,0,0,1,4.605-1.168v39.017"
                    transform="translate(-116.669 -43.456)" fill="#387ed1" />
                <path
                    d="M401.05,202.372V166a11.224,11.224,0,0,1,1.265-5.327,10.29,10.29,0,0,1,3.34-3.8,8.19,8.19,0,0,1,4.605-1.4v46.9"
                    transform="translate(-163.535 -17.862)" fill="#387ed1" />
                <path
                    d="M461.61,184.511V143.873a13.751,13.751,0,0,1,1.265-5.952,11.2,11.2,0,0,1,3.34-4.241,7.6,7.6,0,0,1,4.605-1.569v52.4"
                    transform="translate(-209.836)" fill="#387ed1" />
                <g transform="translate(265.365 145.348)">
                    <path
                        d="M538.111,219.2H551.37a7.563,7.563,0,0,1-.709,3.239,8.232,8.232,0,0,1-1.973,2.657,9.6,9.6,0,0,1-2.935,1.8,9.719,9.719,0,0,1-3.593.658H528.547a9.719,9.719,0,0,1-3.593-.658,9.591,9.591,0,0,1-2.935-1.8,8.222,8.222,0,0,1-1.974-2.657,7.56,7.56,0,0,1-.708-3.239V188.331H551.37a7.562,7.562,0,0,1-.709,3.239,8.227,8.227,0,0,1-1.973,2.657,9.609,9.609,0,0,1-2.935,1.8,9.71,9.71,0,0,1-3.593.657H528.547v7.085h22.61a7.559,7.559,0,0,1-1.493,4.6,9.122,9.122,0,0,1-3.922,3.037,10.243,10.243,0,0,1-3.745.708h-13.45v5.161a1.782,1.782,0,0,0,.607,1.367,2.092,2.092,0,0,0,1.468.557h7.489Z"
                        transform="translate(-519.337 -188.331)" fill="#387ed1" />
                </g>
                <g transform="translate(187.217 190.94)">
                    <g transform="translate(0 0)">
                        <path
                            d="M188.489,387.981c0,1.015.6,1.6,1.735,1.6s1.736-.587,1.736-1.335c0-2.069-4.472-1-4.472-4.005a2.689,2.689,0,0,1,5.34.267H191.76a1.614,1.614,0,0,0-3.2-.267c0,2.069,4.472,1,4.472,4.005,0,1.2-1.055,2.269-2.8,2.269a2.525,2.525,0,0,1-2.8-2.536Z"
                            transform="translate(-187.421 -381.973)" fill="#387ed1" />
                        <path
                            d="M215.421,388.2h-1.068v-.934h.467a.646.646,0,0,0,.734-.735v-.868h.868v1.6h1.335v.934h-1.335v3.138a.959.959,0,0,0,1,1.068,1.193,1.193,0,0,0,.24-.027l.093-.04v.868a.49.49,0,0,1-.147.067,1.419,1.419,0,0,1-.454.067,1.848,1.848,0,0,1-1.736-2Z"
                            transform="translate(-208.012 -384.791)" fill="#387ed1" />
                        <path
                            d="M232.781,395.25a2.815,2.815,0,1,1,2.8,3.07A2.881,2.881,0,0,1,232.781,395.25Zm4.606,0a1.828,1.828,0,1,0-1.8,2.136A1.975,1.975,0,0,0,237.387,395.25Z"
                            transform="translate(-222.101 -389.777)" fill="#387ed1" />
                        <path
                            d="M265.97,396.118a2.711,2.711,0,0,1-2.6,2.2,3.083,3.083,0,0,1,0-6.141,2.711,2.711,0,0,1,2.6,2.2h-1a1.747,1.747,0,0,0-1.6-1.268,2.167,2.167,0,0,0,0,4.272,1.747,1.747,0,0,0,1.6-1.268Z"
                            transform="translate(-243.342 -389.777)" fill="#387ed1" />
                        <path d="M289.2,382.258h1v5.273l2.269-2.87H293.6l-2.27,2.8,2.6,3.2h-1.2l-2.536-3.137v3.137h-1Z"
                            transform="translate(-265.233 -382.191)" fill="#387ed1" />
                        <path
                            d="M325.767,382.258h.868L329.772,389l3.137-6.742h.868v8.41h-1.068v-5.674l-2.6,5.674h-.668l-2.6-5.674v5.674h-1.068Z"
                            transform="translate(-293.194 -382.191)" fill="#387ed1" />
                        <path
                            d="M370.68,397.587a2.05,2.05,0,0,1-.454.374,2.425,2.425,0,0,1-1.348.36,1.849,1.849,0,0,1-2-1.8c0-1.135.8-1.936,3.8-1.936v-.334a1.194,1.194,0,0,0-1.268-1.135,1.075,1.075,0,0,0-1.2.868h-1.068a2.115,2.115,0,0,1,2.269-1.8,2.139,2.139,0,0,1,2.269,2.069v4.005h-.734Zm0-2.069c-2.4,0-2.8.4-2.8,1.068a.907.907,0,0,0,1,.8,1.669,1.669,0,0,0,1.8-1.4Z"
                            transform="translate(-324.623 -389.777)" fill="#387ed1" />
                        <path
                            d="M394.374,392.247h.734l.267.667a1.987,1.987,0,0,1,.44-.361,2.3,2.3,0,0,1,1.295-.374h.134v1h-.267a1.546,1.546,0,0,0-1.6,1.669v3.4h-1Z"
                            transform="translate(-345.648 -389.777)" fill="#387ed1" />
                        <path d="M411.667,382.258h1v5.273l2.269-2.87h1.135l-2.269,2.8,2.6,3.2h-1.2l-2.537-3.137v3.137h-1Z"
                            transform="translate(-358.869 -382.191)" fill="#387ed1" />
                        <path
                            d="M438.336,396.652a2.7,2.7,0,0,1-2.537,1.669,2.9,2.9,0,0,1-2.87-3.07,2.939,2.939,0,0,1,2.8-3.07,2.81,2.81,0,0,1,2.737,3,2.292,2.292,0,0,1-.04.387l-.027.147H434a1.859,1.859,0,0,0,1.8,1.669,1.794,1.794,0,0,0,1.469-.735Zm-.868-1.8a1.736,1.736,0,0,0-3.471,0Z"
                            transform="translate(-375.125 -389.777)" fill="#387ed1" />
                        <path
                            d="M460.645,388.2h-1.068v-.934h.467a.646.646,0,0,0,.734-.735v-.868h.868v1.6h1.335v.934h-1.335v3.138a.959.959,0,0,0,1,1.068,1.188,1.188,0,0,0,.24-.027l.094-.04v.868a.489.489,0,0,1-.147.067,1.416,1.416,0,0,1-.454.067,1.848,1.848,0,0,1-1.735-2Z"
                            transform="translate(-395.499 -384.791)" fill="#387ed1" />
                        <path d="M493.314,382.258h5.34v.934h-4.272v2.67h3.938v.935h-3.938v2.937h4.405v.934h-5.473Z"
                            transform="translate(-421.293 -382.191)" fill="#387ed1" />
                        <path
                            d="M521.531,395.4l-2-2.937h1.135l1.469,2.2,1.469-2.2h1.135l-2,2.937,2.136,3.07h-1.135l-1.6-2.336-1.6,2.336H519.4Z"
                            transform="translate(-441.233 -389.994)" fill="#387ed1" />
                        <path
                            d="M546.327,392.247h.734l.267.667a2.08,2.08,0,0,1,.454-.361,2.421,2.421,0,0,1,1.348-.374,3.083,3.083,0,0,1,0,6.141,2.411,2.411,0,0,1-1.348-.4,2.224,2.224,0,0,1-.454-.4v2.87h-1Zm4.606,3a1.886,1.886,0,1,0-1.869,2.136A1.973,1.973,0,0,0,550.933,395.25Z"
                            transform="translate(-461.824 -389.777)" fill="#387ed1" />
                        <path
                            d="M579.517,396.652a2.7,2.7,0,0,1-2.537,1.669,2.9,2.9,0,0,1-2.87-3.07,2.939,2.939,0,0,1,2.8-3.07,2.81,2.81,0,0,1,2.737,3,2.292,2.292,0,0,1-.04.387l-.027.147h-4.406a1.859,1.859,0,0,0,1.8,1.669,1.793,1.793,0,0,0,1.469-.735Zm-.868-1.8a1.735,1.735,0,1,0-3.471,0Z"
                            transform="translate(-483.065 -389.777)" fill="#387ed1" />
                        <path
                            d="M603.309,392.247h.734l.267.667a1.992,1.992,0,0,1,.441-.361,2.3,2.3,0,0,1,1.295-.374h.134v1h-.267a1.546,1.546,0,0,0-1.6,1.669v3.4h-1Z"
                            transform="translate(-505.39 -389.777)" fill="#387ed1" />
                        <path
                            d="M618.835,388.2h-1.068v-.934h.467a.646.646,0,0,0,.734-.735v-.868h.868v1.6h1.335v.934h-1.335v3.138a.959.959,0,0,0,1,1.068,1.187,1.187,0,0,0,.24-.027l.094-.04v.868a.5.5,0,0,1-.147.067,1.419,1.419,0,0,1-.454.067,1.848,1.848,0,0,1-1.735-2Z"
                            transform="translate(-516.444 -384.791)" fill="#387ed1" />
                        <path
                            d="M637.2,396.452a1.07,1.07,0,0,0,1.2.935c.681,0,1.068-.4,1.068-.868,0-1.348-3.137-.32-3.137-2.6a2.056,2.056,0,0,1,4.072.067h-1a.934.934,0,0,0-1.068-.868.907.907,0,0,0-1,.8c0,1.348,3.137.334,3.137,2.6a1.871,1.871,0,0,1-2.069,1.8,2,2,0,0,1-2.2-1.869Z"
                            transform="translate(-530.532 -389.777)" fill="#387ed1" />
                    </g>
                </g>
            </g>
        </svg>
    </>
}